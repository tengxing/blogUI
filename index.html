
<!DOCTYPE html>
<!DOCTYPE html>
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Keywords" content="遇见小星 Blog JAVA MySQL Linux HTML CSS js 后端开发">
    <meta name="Description" content="Blog&#39;s 遇见小星的个人博客 分享互联网技术 记录生活">
    <title>Starry Blog</title>
    <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="js/bubble.js"></script>
    <!-- <script src="index.js"/> -->
    

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script type="text/javascript">
        baseUrl = "file:///home/tengxing/tmp/yjxxUI/index.html";
    </script>
</head>
<body style="background-color: #f9f9f9;">
    <!--[if lt IE 9]>
        <h3 style="color:black;background: #FF5;margin: 0;padding:10px;position: fixed; z-index: 99;width: 100%" class="text-center">
            此浏览器太旧，或处于兼容模式
        </h3>
        <![endif]-->
        <noscript style="color:black;background: #FF5;margin: 0;padding:10px;position: fixed; z-index: 99;width: 100%" class="text-center">
            必须启用javascript才能正确浏览
        </noscript>
        <!-- header start -->
        <!-- <div class="main-header">
            <div id="blogTitle">
                <h2>Starry Blog</h2>
                <h5>Keep　It　Simple,Stupid!</h5>
                <canvas id="bubbleCanvas" width="300" height="130">你的浏览器版本过低</canvas>
            </div>
            
        </div> -->
        <!-- header end -->

         <!-- start navigation -->
    <nav class="main-navigation" style="">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="navbar-header">
                        <span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu">
                        <span class="sr-only">Toggle navigation</span>
                        <i class="fa fa-bars"></i>
                        </span>
                    </div>
                    <div class="collapse navbar-collapse" id="main-menu">
                        <div class="logo"><p href="">Starry Blog</p></div>
                        <ul class="menu">
        <li class="nav-current" role="presentation"><a href="http://yjxxclub.cn/blog/index">主页</a></li>
        <li role="presentation"><a href="http://github.com/tengxing">Github</a></li>
        <li role="presentation"><a href="http://blog.csdn.net/tengxing007">Csdn博客</a></li>
        <li role="presentation"><a href="http://yjxxclub.cn/resources">资源</a></li>
        <li role="presentation"><a href="http://yjxxclub.cn/download/">下载</a></li>
        <li role="presentation"><a href="http://yjxxclub.cn/about/">关于</a></li>
</ul>   
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!-- end navigation -->

        <!-- content start -->
        <div class="content-warp">
            <div class="container">
                <!-- margin左右各15px -->
                <div class="row">
                    <!-- 左半部分 -->
                    <div class="col-md-8 main-content">
                        <!-- 文章start -->
                        <div id="getBlogList"></div>
                        <!-- 文章end -->
                        <!-- 分页start -->
                        <nav>
                            <ul class="pagination pagination-sm">
                                <!-- <li><a href='/blog/index.html?page=1&'>首页</a></li><li class='disabled'><a href='#'>上一页</a></li><li class='active'><a href='/blog/index.html?page=1&'>1</a></li><li><a href='/blog/index.html?page=2&'>2</a></li><li><a href='/blog/index.html?page=3&'>3</a></li><li><a href='/blog/index.html?page=2&'>下一页</a></li><li><a href='/blog/index.html?page=4&'>末页</a></li> -->
                            </ul>
                        </nav>
                        <!-- 分页end -->
                    </div>
                    <!-- 左半部分end -->
                    <!-- 右半部分start -->
                    <div class="col-md-4 sidebar">
                        <div class="sidebar-content">
                        <!-- start search area -->
                            <form class="form-horizontal" role="form" action="http://yjxxclub.cn/blog/search" method="GET">
                                 <input id="search" class="form-control" name="s" type="text" value="">
                                <button type="submit" class="animation red-btn">Search</button>
                            </form>
                         <!-- start tag line widget -->
                        <div class="widget">
                            <h4 class="title">专栏</h4>
                            <div class="content tag-line">
                                <!-- start category area -->
                                <ul class="nav nav-sidebar">
                                        
                                                    <li class="">
                                            <a href="/blog/index.html?releaseDateStr=2017年03月">tensorflow<sup>1</sup></a>
                                        </li>
                                            
                                                    <li class="">
                                            <a href="/blog/index.html?releaseDateStr=2017年02月">爬虫系列<sup>18</sup></a>
                                        </li>

                                                    <li class="">
                                            <a href="/blog/index.html?releaseDateStr=2017年02月">数据可视化<sup>18</sup></a>
                                        </li>
                                            
                                    </ul>
                            </div>
                        </div>
                        <!-- end tag line widget -->
                        <!-- start tag cloud widget -->
                        <div class="widget">
                            <h4 class="title">分类</h4>
                             <div class="content tag-cloud">
                                <div id="blogCategory"></div>
                                        
                                           
                                        
                                           
                               </div>
                        </div>
                        <!-- end tag cloud widget -->   
                        <!-- start tag line widget -->
                        <div class="widget">
                            <h4 class="title">日历</h4>
                            <div class="content tag-line">
                                <!-- start category area -->
                                    <ul class="nav nav-sidebar">
                                        <div id="getBlogCount"></div>
                                    </ul>
                            </div>
                        </div>
                        <!-- end tag line widget -->    
                    </div>
                    <!-- 右半部分end -->
                </div>
            </div>
        </div> 
        <!-- content end -->     
        <!-- footer start-->
        <div class="main-footer">
            <!-- <div class="container">
                <div class="logo">
                Pensonl BLOG
                </div>
                <p>
                    &nbsp;&nbsp; My's original blog.
                    <br>
                    「 keep calm and carry on 」
                </p>
            </div> -->
            <h5 class="copyright text-center">
               © 2017 Starrt.Teng &nbsp;|&nbsp;  鲁ICP备17024653号 &nbsp;|&nbsp;
                <a href="http://www.miitbeian.gov.cn" target="_blank">版权所有</a> &nbsp;|&nbsp;
                <a href="#">Admin</a>
            </h5>
        </div>

        <a href="http://www.ghostchina.com/#" id="back-to-top" style="display: none;"><i class="fa fa-angle-up"></i></a>
        <!-- footer end -->

<script type="text/javascript">
        function getBlogCategory() {
    // body...
     $.get("http://localhost:3000/blog/getBlogCategory", function(result){
        
        html=''
        for (var i = result.length - 1; i >= 0; i--) {
            html+='<a href="http://yjxxclub.cn/blog/index.html?typeId='+result[i]["id"]+'">'+result[i]["typeName"]+'</a>';
        }
        html+='<a href="http://yjxxclub.cn/blog/index.html?typeId=more">...</a>'
        $("#blogCategory").html(html);
    });

     $.get("http://localhost:3000/blog/getBlogCount", function(result){
        html=''
        for (var i = result.length - 1; i >= 0; i--) {
            html+='<li class=""><a href="http://yjxxclub.cn/blog/index.html?releaseDateStr='+result[i]["date"]+'">'+result[i]["date"]+'<sup>'+result[i]["count"]+'</sup></a></li>';
        }
        $("#getBlogCount").html(html);
     });
}

initParams();
initPage();
getBlogCategory();
//获取url的param
function GetQueryString(name){
     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     var r = window.location.search.substr(1).match(reg);
        if(r!=null)
            return  unescape(r[2]);
     return null;
}

//初始化分页参数
function initParams(){
    url = window.location;
    if (GetQueryString("page")==null) {
        window.location=baseUrl+"?page=1&";
    }
}

//初始化分页
function initPage(){
    page = parseInt(GetQueryString("page"));
    size = parseInt((GetQueryString("size")==null||GetQueryString("size")=="" ? 5:GetQueryString("size")));
    console.info(page+","+size)
    $.ajax({
        url:"http://localhost:3000/blog/getBlogListByPage",
        data:{"page":page,"size":size},
        type:"get",
        success:function(res){
            if (res.status==200) {
                data = res.data;
                count = res.count;

                html=''
                for (var i = data.length - 1; i >= 0; i--) {
                       html+='<div class="posts animation"><h4 class="posts-title"><a href="http://yjxxclub.cn/blog/blog/articles/'+data[i]["id"]+'.html" class="animation">'+data[i]["title"]+'</a></h4><p class="time">'+(data[i]["auther"]?data[i]["auther"]:"博主")+' &nbsp; '+data[i]["releaseDate"]+'</p><p class="descript">'+data[i]["summary"]+'</p><div class="posts-footer">分类:<a class="class animation" href="/blog/blog/articles/19.html">推荐阅读</a>&nbsp;<a class="class animation" href="/blog/blog/articles/19.html">tensorflow</a></div></div>';
                }
                $("#getBlogList").html(html);

                paginationStr = genPagination(baseUrl,count,page,size,"size=")
                $(".pagination").html(paginationStr);
            }
        }
    });
}


//自定义分页
function genPagination(targetUrl,totalNum,currentPage,pageSize,param){
        totalPage=totalNum%pageSize==0?Math.floor(totalNum/pageSize):Math.floor(totalNum/pageSize)+1;
        if(totalPage==0){
            return "1";
        }else if(totalPage<currentPage){
            //防止当前页数大于所有页数
            targetUrl = targetUrl;
            totalNum = totalNum;
            pageSize = pageSize;
            param = param;
           return genPagination(targetUrl,totalNum,1,pageSize,param)
        }else{
            pageCode = '';
            pageCode+="<li><a href='"+targetUrl+"?page=1&"+param+"'>首页</a></li>";
            if(currentPage>1){
                pageCode+="<li><a href='"+targetUrl+"?page="+(currentPage-1)+"&"+param+"'>上一页</a></li>";         
            }else{
                pageCode+="<li class='disabled'><a href='#'>上一页</a></li>";
            }
            for(i=currentPage-2;i<=currentPage+2;i++){
                if(i<1||i>totalPage){
                    continue;
                }
                if(i==currentPage){
                    pageCode+="<li class='active'><a href='"+targetUrl+"?page="+i+"&"+param+"'>"+i+"</a></li>";  
                }else{
                    pageCode+="<li><a href='"+targetUrl+"?page="+i+"&"+param+"'>"+i+"</a></li>"; 
                }
            }
            if(currentPage<totalPage){
                pageCode+="<li><a href='"+targetUrl+"?page="+(currentPage+1)+"&"+param+"'>下一页</a></li>";     
            }else{
                pageCode+="<li class='disabled'><a href='#'>下一页</a></li>";   
            }
            pageCode+="<li><a href='"+targetUrl+"?page="+totalPage+"&"+param+"'>末页</a></li>";
            return pageCode.toString();
        }

    }
</script>    
</body>
</html>